<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MYSTA ENDING</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  height: 100vh;
  overflow: hidden;
  background: #000;
  font-family: "Courier New", monospace;
  position: relative;
  color: #e7fff6;
}

/* BACKGROUND GRADIENT */
.bg {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at top, #1a3d3a 0, #020b0b 45%, #000 85%);
  animation: slowDawn 26s ease-in-out infinite alternate;
  z-index: -3;
}

/* SOFT LIGHT OVERLAY */
.overlay-light {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 50% 15%, rgba(120,255,220,0.2), transparent 60%),
    radial-gradient(circle at 10% 80%, rgba(80,160,255,0.17), transparent 60%),
    radial-gradient(circle at 90% 70%, rgba(240,220,140,0.16), transparent 60%);
  mix-blend-mode: screen;
  opacity: 0.7;
  z-index: -2;
}

/* NOISE OVERLAY */
.noise {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.07'/%3E%3C/svg%3E");
  opacity: 0.25;
  z-index: 5;
}

/* MYSTA LOGO GLOW */
.mysta-logo {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 260px;
  height: 260px;
  transform: translate(-50%, -50%);
  background-image: url("mysteria_logo.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.12;
  filter: drop-shadow(0 0 18px rgba(140,255,220,0.7));
  z-index: -1;
  animation: logoPulse 10s ease-in-out infinite alternate;
}

/* SCROLLING TEXT + FADE-IN */
.scroll-container {
  position: absolute;
  bottom: -120%;
  width: 100%;
  text-align: center;
  animation:
    scrollUp 48s linear forwards,
    fadeInScroll 3s ease-out forwards;
  z-index: 10;
  opacity: 0;
}

.scroll-text {
  width: 70%;
  margin: auto;
  font-size: 24px;
  line-height: 1.8;
  color: #e7fff6;
  text-shadow: 0 0 12px rgba(140,255,220,0.7);
  letter-spacing: 2px;
}

/* MOBILE AANPASSINGEN */
@media (max-width: 768px) {
  .scroll-text {
    width: 85%;
    font-size: 18px;
    line-height: 1.6;
  }
}

/* SUBSCRIBE BUTTON – DELAYED FADE-IN */
.subscribe {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%) translateY(10px);
  padding: 12px 28px;
  font-size: 16px;
  color: #e7fff6;
  text-transform: uppercase;
  background: rgba(40,200,150,0.2);
  border: 2px solid rgba(140,255,220,0.9);
  border-radius: 6px;
  cursor: pointer;
  backdrop-filter: blur(4px);
  transition: 0.2s;
  z-index: 20;
  text-decoration: none;
  display: inline-block;
  text-align: center;

  opacity: 0;
  animation: revealButton 3s ease-out forwards;
  animation-delay: 6s;
}

.subscribe:hover {
  background: rgba(40,200,150,0.37);
  box-shadow: 0 0 15px rgba(140,255,220,0.9);
  transform: translateX(-50%) translateY(-1px);
}

/* ANIMATIONS */
@keyframes scrollUp {
  0% { bottom: -120%; }
  100% { bottom: 130%; }
}

@keyframes fadeInScroll {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes slowDawn {
  0%   { transform: scale(1); }
  100% { transform: scale(1.06); }
}

@keyframes logoPulse {
  0% {
    opacity: 0.08;
    filter: drop-shadow(0 0 8px rgba(140,255,220,0.4));
  }
  100% {
    opacity: 0.18;
    filter: drop-shadow(0 0 22px rgba(140,255,220,0.9));
  }
}

@keyframes revealButton {
  0%   { opacity: 0; transform: translateX(-50%) translateY(10px); }
  100% { opacity: 1; transform: translateX(-50%) translateY(0); }
}
</style>
</head>

<body>

<!-- BACKGROUND LAYERS -->
<div class="bg"></div>
<div class="overlay-light"></div>
<div class="mysta-logo"></div>
<div class="noise"></div>

<!-- SCROLLING LORE (WORDT GEVULD VIA JS) -->
<div class="scroll-container">
  <div class="scroll-text"></div>
</div>

<!-- SUBSCRIBE BUTTON -->
<a href="https://www.youtube.com/@MysteriaProtocol"
   target="_blank"
   rel="noopener noreferrer"
   class="subscribe">
  SUBSCRIBE TO CONTINUE THE STORY
</a>

<script>
  // Versleutelde MYSTA-tekst (met "OK|" prefix, daarna elke regel gescheiden door \n)
  const ENCRYPTED_MYSTA =
    "xwhT49hGTOgtGIiejrgrkn5MXPfiFeaEo2b6O/u5E+jbF26X0VQt5SEY5fLgoDDgc1Fc9OEY+OatLvsn" +
    "ntAQkcQKaP/ELWb6LBPpnuG8MOB1UTnljhTkmcQ47yf7uR/iqAIP+dVUTP0tEYeT4s8nlW5MXOLmDu6f" +
    "yiSOJ/bcfufHCmuZmloj+0QVgZ39qkSUdT8w//0I5ISjTPc867kd+ccQapfETEz9IRPn2PqnIYloPzf4" +
    "4Qvtj8kr61P41RHm22N7/8JMOeksdp2a688ikntcKOP8GfLqwiqOKvHMDJHfDH371C9m/iUCiprnoSPg" +
    "bVc94o4f7p/BKI4x+7kN8N4Ga5uwUSn5Nh+dm+CoRJdyXiiW7RP0hslM4Dzqt1TlwAYP8d9RKf0wdouA" +
    "664wiH9MXPfpHeiEo0z9O//dEebbY2Py0VEijjAejJv8zyiJd1Yo5YBW9YLITPs99dcR5sYQD+DZVyTq" +
    "Nhee/o64K5V0Wznygnzvj9sp/FPqywv90WNo+N5GQqQwHozy47Y3lHs/OPmOEu6erT7rJ+vLEJHJEA/w" +
    "30c/jisE6ZXmoDeUaTN29PsIgYveTO9T6dEX4tgGfZfZTUzrMhObi468LYd0XjCajhn3j981jiD9yxv0" +
    "xm8P8sZGPvdEB5yX/bstj3Qxdu/hCYGL3ymOPfHNfuXABmblsFAp/DIXh4aAzz2Pbz895Ot89YLIJfxT" +
    "/dYQ5cENevbESiPgSlydmue8RIlpPzL5+nzg6t8p/Tbqt37lwAp8l9lQTO9EGIyFjq02gXRcNJikGu6Y" +
    "rSLhJJK5B/7dEQ/g31Eg6kQFnID4pjKFaTF28OEOgYTCO4JT6tEbkcoCY/beQCmOLBmFlv3BboJvS1zi" +
    "5hmBmsw4+jbs137422N849lPII4zBICG56Ej4HNLL/PiGo/ko2bvPfq5B/7dY27l1SMi4TN2mZP8u0SP" +
    "fD8o/ut86YvDKI4n9tgKkd8RZuPVUEKkIRiN8uGpRJN/Tinz4B/k5A==";

  function getTokenFromQuery() {
    const params = new URLSearchParams(window.location.search);
    return params.get("k") || "";
  }

  function hexToBytes(hex) {
    if (!hex || hex.length % 2 !== 0) return null;
    const bytes = [];
    for (let i = 0; i < hex.length; i += 2) {
      bytes.push(parseInt(hex.substr(i, 2), 16));
    }
    return bytes;
  }

  function decryptEnding(encB64, keyHex) {
    try {
      if (!keyHex || keyHex.length !== 64) return null;
      const keyBytes = hexToBytes(keyHex);
      if (!keyBytes) return null;

      const binStr = atob(encB64);
      const out = [];

      for (let i = 0; i < binStr.length; i++) {
        const encByte = binStr.charCodeAt(i);
        const plainByte = encByte ^ keyBytes[i % keyBytes.length];
        out.push(String.fromCharCode(plainByte));
      }
      return out.join("");
    } catch (e) {
      return null;
    }
  }

  function showDenied() {
    const scroll = document.querySelector(".scroll-text");
    if (scroll) {
      scroll.innerHTML =
        "<p>ACCESS DENIED.</p><p>CORRUPTED OR INCOMPLETE PATH.</p>";
    }
  }

  function initMystaEnding() {
    const token = getTokenFromQuery();
    const plain = decryptEnding(ENCRYPTED_MYSTA, token);

    if (!plain || !plain.startsWith("OK|")) {
      showDenied();
      return;
    }

    const body = plain.slice(3); // "OK|" strippen
    const lines = body.split("\n");
    const scroll = document.querySelector(".scroll-text");
    if (!scroll) return;

    scroll.innerHTML = lines
      .map(line => "<p>" + line + "</p>")
      .join("");
  }

  initMystaEnding();

  // Na 10 seconden: één klik ergens op de pagina = replay
  setTimeout(() => {
    document.body.addEventListener(
      "click",
      () => {
        location.reload();
      },
      { once: true }
    );
  }, 10000);
</script>

</body>
</html>
